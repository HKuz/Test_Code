#!/usr/local/bin/python
# Code Fights Sudoku Problem


def sudoku(grid):
    if len(grid) != 9 or len(grid[0]) != 9:
        return False

    test = {i for i in range(1, 10)}

    # Check rows
    if not all([set(r) == test for r in grid]):
        return False

    # Check columns
    if not all([set(col) == test for col in zip(*grid)]):
        return False

    # Check 3x3 grids
    squares = [[grid[r + i][c + j] for i in [0, 1, 2] for j in [0, 1, 2]]
               for r in range(0, 9, 3) for c in range(0, 9, 3)]

    return all([set(s) == test for s in squares])


def main():
    tests = [
        [
            [[1, 3, 2, 5, 4, 6, 9, 8, 7],
             [4, 6, 5, 8, 7, 9, 3, 2, 1],
             [7, 9, 8, 2, 1, 3, 6, 5, 4],
             [9, 2, 1, 4, 3, 5, 8, 7, 6],
             [3, 5, 4, 7, 6, 8, 2, 1, 9],
             [6, 8, 7, 1, 9, 2, 5, 4, 3],
             [5, 7, 6, 9, 8, 1, 4, 3, 2],
             [2, 4, 3, 6, 5, 7, 1, 9, 8],
             [8, 1, 9, 3, 2, 4, 7, 6, 5]],
            True
        ],
        [
            [[1, 3, 2, 5, 4, 6, 9, 2, 7],
             [4, 6, 5, 8, 7, 9, 3, 8, 1],
             [7, 9, 8, 2, 1, 3, 6, 5, 4],
             [9, 2, 1, 4, 3, 5, 8, 7, 6],
             [3, 5, 4, 7, 6, 8, 2, 1, 9],
             [6, 8, 7, 1, 9, 2, 5, 4, 3],
             [5, 7, 6, 9, 8, 1, 4, 3, 2],
             [2, 4, 3, 6, 5, 7, 1, 9, 8],
             [8, 1, 9, 3, 2, 4, 7, 6, 5]],
            False
        ],
        [
            [[1, 3, 4, 2, 5, 6, 9, 8, 7],
             [4, 6, 8, 5, 7, 9, 3, 2, 1],
             [7, 9, 2, 8, 1, 3, 6, 5, 4],
             [9, 2, 3, 1, 4, 5, 8, 7, 6],
             [3, 5, 7, 4, 6, 8, 2, 1, 9],
             [6, 8, 1, 7, 9, 2, 5, 4, 3],
             [5, 7, 6, 9, 8, 1, 4, 3, 2],
             [2, 4, 5, 6, 3, 7, 1, 9, 8],
             [8, 1, 9, 3, 2, 4, 7, 6, 5]],
            False
        ],
        [
            [[1, 3, 2, 5, 4, 6, 9, 8, 7],
             [4, 6, 5, 8, 7, 9, 3, 2, 1],
             [7, 9, 8, 2, 1, 3, 6, 5, 4],
             [9, 2, 1, 4, 3, 5, 8, 7, 6],
             [3, 5, 4, 7, 6, 8, 2, 1, 9],
             [6, 8, 7, 1, 9, 2, 5, 4, 3],
             [5, 4, 6, 9, 8, 1, 4, 3, 2],
             [2, 7, 3, 6, 5, 7, 1, 9, 8],
             [8, 1, 9, 3, 2, 4, 7, 6, 5]],
            False
        ],
        [
            [[1, 2, 3, 4, 5, 6, 7, 8, 9],
             [4, 6, 5, 8, 7, 9, 3, 2, 1],
             [7, 9, 8, 2, 1, 3, 6, 5, 4],
             [1, 2, 3, 4, 5, 6, 7, 8, 9],
             [4, 6, 5, 8, 7, 9, 3, 2, 1],
             [7, 9, 8, 2, 1, 3, 6, 5, 4],
             [1, 2, 3, 4, 5, 6, 7, 8, 9],
             [4, 6, 5, 8, 7, 9, 3, 2, 1],
             [7, 9, 8, 2, 1, 3, 6, 5, 4]],
            False
        ],
        [
            [[5, 3, 4, 6, 7, 8, 9, 1, 2],
             [6, 7, 2, 1, 9, 5, 3, 4, 8],
             [1, 9, 8, 3, 4, 2, 5, 6, 7],
             [8, 5, 9, 9, 6, 1, 4, 2, 3],
             [4, 2, 6, 8, 5, 3, 7, 9, 1],
             [7, 1, 3, 7, 2, 4, 8, 5, 6],
             [9, 6, 1, 5, 3, 7, 2, 8, 4],
             [2, 8, 7, 4, 1, 9, 6, 3, 5],
             [3, 4, 5, 2, 8, 6, 1, 7, 9]],
            False
        ],
        [
            [[5, 5, 5, 5, 5, 5, 5, 5, 5],
             [5, 5, 5, 5, 5, 5, 5, 5, 5],
             [5, 5, 5, 5, 5, 5, 5, 5, 5],
             [5, 5, 5, 5, 5, 5, 5, 5, 5],
             [5, 5, 5, 5, 5, 5, 5, 5, 5],
             [5, 5, 5, 5, 5, 5, 5, 5, 5],
             [5, 5, 5, 5, 5, 5, 5, 5, 5],
             [5, 5, 5, 5, 5, 5, 5, 5, 5],
             [5, 5, 5, 5, 5, 5, 5, 5, 5]],
            False
        ]
    ]

    for t in tests:
        res = sudoku(t[0])
        ans = t[1]
        if ans == res:
            print("PASSED: sudoku({}) returned {}"
                  .format(t[0], res))
        else:
            print("FAILED: sudoku({}) returned {}, answer: {}"
                  .format(t[0], res, ans))


if __name__ == '__main__':
    main()
